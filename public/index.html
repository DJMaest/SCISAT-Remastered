<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

    <title></title>
  </head>
  <body>
    <section>
      <header>
        <h1>Trying for now</h1>
      </header>
      <nav>
        <ul>
          <li><a href="about.html">About</a></li>
          <li><a href="docs.html">Docs</a></li>
        </ul>
      </nav>
      <div id="chartContainer" style="height: 370px; width: 100%;"></div>
      <div id='themain' class="container">
          <form class="form-inline">
              <div class='col-sm-3' style="padding-right:0px;padding-left:0px">
                  <div class='input-group' style="display: inline;" id='date1'>

                      <label for="startd" style="padding-right:4px;margin-bottom:0px;display: inline-block;">Start Date: </label>
                      <input type="date" id="startd" name="start date">

                  </div>
              </div>
              <div class='col-sm-3' style="padding-right:0px;padding-left:0px">
                  <div class='input-group' id='date1' style="display: inline;">

                      <label for="endd" style="padding-right:4px;margin-bottom:0px;display: inline-block;">End Date: </label>
                      <input type="date" id="endd" name="end date">

                  </div>
              </div>
              <div class='col-sm-1' style="padding-right:5px;padding-left:0px">
                  <div class='input-group' id='date1' style="display: inline;">

                      <label for="crews" style="padding-right:4px;margin-bottom:0px;display: inline-block;">Crew: </label>
                      <select id="crews" name="Crew selection">
                          <option value="All">All</option>
                          <option value="A">A</option>
                      </select>

                  </div>
              </div>
              <div class='col-sm-1' style="padding-right:5px;padding-left:0px">
                  <div class='input-group' id='date1' style="display: inline;">

                      <label for="dORn" style="padding-right:4px;margin-bottom:0px;display: inline-block;">Shift: </label>
                      <select id="dORn" name="Shift selection">
                          <option value="Both">Both</option>
                          <option value="D">Day</option>
                          <option value="N">Night</option>
                      </select>

                  </div>
              </div>
              <div class='col-sm-1' style="padding-right: 0px; padding-left: 0px">
                  <div class='input-group' id='date1' style="display: inline;">

                      <label for="Ptype" style="padding-right:4px;margin-bottom:0px;display: inline-block;">Product: </label>
                      <select id="Ptype" name="Type selection">
                          <option value="All">All</option>
                          <option value="EKVONE">EKVONE</option>
                      </select>

                  </div>
              </div>
              <div class="col-sm-2" style="padding-right:0px;padding-left:0px;display: flex; justify-content: flex-end">
                  <div class='input-group' id='date1' style="display: inline;">
                      <span class="input-group-addon">
                          <input type="button" class="btn btn-block btn-primary" onclick="obtaind()" value="Submit">
                      </span>
                  </div>
              </div>
          </form>
        </div>
    </section>



    <script type="text/javascript">

    $(function () {

      $.ajax({
        type: "GET",
        url:"/api/points",
        success: function (response) {
          console.log(response);
          //var thedata = [];
          var theydata = [];
          var thelabels = [];
          var thedata = response.Data.map(({_id, __v, ...rest}) => rest)
          var passingdata = [{
            label: 'First plot ever',
            data: thedata
          }];
          var data = [];
          var dataSeries = { type: "scatter" };
          dataSeries.dataPoints = thedata;
          data.push(dataSeries);
          var options = {
            animationEnabled: true,
            title: {
              text: "First ever plot"
            },
            data: data  // random data
          };
          console.log(options)
          var chart = new CanvasJS.Chart("chartContainer", options);
          chart.render();
        }
      });

    });

    $('ul li').on('click', 'a', function(e){
      e.preventDefault();
      var url_using = $(this).attr('href');

      $.ajax({
        type: "GET",
        url: "about.html",
        success: function(response){
          $('#themain').html(response);
        }
      });
    });
    </script>
  </body>
  <footer>
    <p>&copy; {{ year }}</p>
  </footer>

<!--
  footer: function (tooltipItems, data) {
                       
                        var theone = tooltipItems[3].datasetIndex + 1
                        var interesting = [];
                        interesting = data.datasets[theone].data[tooltipItems[3].index];

                        return 'Ship ID: ' + interesting[0]["Ship ID"] + '\n' +
                            'Product: ' + interesting[0]["Product"] + '\n' +
                            'Car count by Product: ' + interesting[0]["Car count by product"] + '\n' +
                            'Min Weight: ' + interesting[0]["Min weight"] + '\n' +
                            'Max Weight: ' + interesting[0]["Max weight"] + '\n' +
                            'Standard dev: ' + interesting[0]["Standard dev"] + '\n' +
                            'Loss: ' + interesting[0]["Loss"].substr(0,6);
-->

</html>
